{% extends 'base.html' %}
{% load static %}

{% block title %}Contacto - Gesti√≥n de Proyectos{% endblock %}

{% block extra_css %}
<style>
    /* Estilos adicionales para el formulario mejorado */
    .form-row {
        display: flex;
        gap: 15px;
        margin-bottom: 1.5rem;
    }
    
    .form-row .form-group {
        flex: 1;
    }
    
    .form-hint {
        font-size: 0.85rem;
        color: #666;
        margin-top: 0.25rem;
    }
    
    .checkbox-group {
        display: flex;
        align-items: center;
        margin-bottom: 1.5rem;
    }
    
    .checkbox-group input {
        margin-right: 10px;
    }
    
    .form-success {
        background-color: #d4edda;
        color: #155724;
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 1.5rem;
        display: none;
    }
    
    .form-error {
        background-color: #f8d7da;
        color: #721c24;
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 1.5rem;
        display: none;
    }
    
    .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255,255,255,.3);
        border-radius: 50%;
        border-top-color: #fff;
        animation: spin 1s ease-in-out infinite;
        margin-left: 10px;
        display: none;
    }
    
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    
    .contact-methods {
        display: flex;
        gap: 15px;
        margin-top: 1.5rem;
    }
    
    .contact-method {
        flex: 1;
        text-align: center;
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 8px;
        transition: transform 0.3s;
    }
    
    .contact-method:hover {
        transform: translateY(-5px);
    }
    
    .contact-method i {
        font-size: 2rem;
        color: var(--accent-color);
        margin-bottom: 0.5rem;
    }
</style>
{% endblock %}

{% block content %}
<section class="contact">
    <div class="container">
        <h1>Contacto</h1>
        <p>¬øTienes preguntas? Estamos aqu√≠ para ayudarte. Cont√°ctanos y te responderemos lo antes posible.</p>
        
        <div class="contact-methods">
            <div class="contact-method">
                <i>üìß</i>
                <h3>Email</h3>
                <p>info@gestionproyectos.com</p>
                <small>Respuesta en 24h</small>
            </div>
            <div class="contact-method">
                <i>üìû</i>
                <h3>Tel√©fono</h3>
                <p>+34 123 456 789</p>
                <small>Lun-Vie, 9:00-18:00</small>
            </div>
            <div class="contact-method">
                <i>üí¨</i>
                <h3>Chat en vivo</h3>
                <p>Disponible</p>
                <small>En horario laboral</small>
            </div>
        </div>
        <hr>
        <div class="contact-content">
            <div class="contact-info">
                <br>
                <h2>Informaci√≥n de Contacto</h2>
                <p><strong>Direcci√≥n:</strong> Calle Principal 123, Ciudad, 28001 Madrid</p>
                <p><strong>Tel√©fono:</strong> +34 123 456 789</p>
                <p><strong>Email:</strong> info@gestionproyectos.com</p>
                <p><strong>Horario:</strong> Lunes a Viernes, 9:00 - 18:00</p>
                
                <div class="social-links" style="margin-top: 2rem;">
                    <h3>S√≠guenos en redes sociales</h3>
                    <div style="display: flex; gap: 15px; margin-top: 10px;">
                        <a href="#" style="font-size: 1.5rem; color: var(--primary-color);">üì±</a>
                        <a href="#" style="font-size: 1.5rem; color: var(--primary-color);">üíª</a>
                        <a href="#" style="font-size: 1.5rem; color: var(--primary-color);">üìò</a>
                        <a href="#" style="font-size: 1.5rem; color: var(--primary-color);">üê¶</a>
                    </div>
                </div>
            </div>
            <div class="contact-form">
                <br>
                <h2>Env√≠anos un mensaje</h2>
                <div class="form-success" id="formSuccess">
                    ¬°Gracias por tu mensaje! Te contactaremos en breve.
                </div>
                <div class="form-error" id="formError">
                    Ha ocurrido un error al enviar el mensaje. Por favor, int√©ntalo de nuevo.
                </div>
                
                <form id="contactForm" method="post">
                    {% csrf_token %}
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">Nombre completo *</label>
                            <input type="text" id="name" name="name" required placeholder="Tu nombre completo">
                            <div class="form-hint">C√≥mo te llamas</div>
                        </div>
                        <div class="form-group">
                            <label for="company">Empresa</label>
                            <input type="text" id="company" name="company" placeholder="Nombre de tu empresa">
                            <div class="form-hint">Opcional</div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Correo electr√≥nico *</label>
                            <input type="email" id="email" name="email" required placeholder="tu.email@ejemplo.com">
                            <div class="form-hint">Para responderte</div>
                        </div>
                        <div class="form-group">
                            <label for="phone">Tel√©fono</label>
                            <input type="tel" id="phone" name="phone" placeholder="+34 000 000 000">
                            <div class="form-hint">Opcional</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="subject">Asunto *</label>
                        <select id="subject" name="subject" required>
                            <option value="">Selecciona un asunto</option>
                            <option value="soporte">Soporte t√©cnico</option>
                            <option value="ventas">Informaci√≥n de ventas</option>
                            <option value="colaboracion">Propuesta de colaboraci√≥n</option>
                            <option value="otros">Otro asunto</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Mensaje *</label>
                        <textarea id="message" name="message" rows="5" required 
                                  placeholder="Describe tu consulta o propuesta en detalle..."></textarea>
                        <div class="form-hint">M√≠nimo 20 caracteres</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="attachment">Adjuntar archivo</label>
                        <input type="file" id="attachment" name="attachment">
                        <div class="form-hint">Formatos: PDF, DOC, DOCX (M√°x. 5MB)</div>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="newsletter" name="newsletter" checked>
                        <label for="newsletter">Deseo recibir novedades y ofertas por email</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="privacy" name="privacy" required>
                        <label for="privacy">He le√≠do y acepto la <a href="#" style="color: var(--accent-color);">pol√≠tica de privacidad</a> *</label>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" id="submitButton">
                        Enviar mensaje
                        <span class="loading" id="loadingIndicator"></span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const contactForm = document.getElementById('contactForm');
        const successMessage = document.getElementById('formSuccess');
        const errorMessage = document.getElementById('formError');
        const submitButton = document.getElementById('submitButton');
        const loadingIndicator = document.getElementById('loadingIndicator');
        
        // Validaci√≥n en tiempo real
        const inputs = contactForm.querySelectorAll('input, textarea, select');
        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                validateField(this);
            });
        });
        
        // Env√≠o del formulario
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validar todos los campos
            let isValid = true;
            inputs.forEach(input => {
                if (!validateField(input)) {
                    isValid = false;
                }
            });
            
            if (!isValid) {
                errorMessage.textContent = 'Por favor, completa todos los campos requeridos correctamente.';
                errorMessage.style.display = 'block';
                return;
            }
            
            // Simular env√≠o (en un caso real, aqu√≠ har√≠as una petici√≥n AJAX)
            submitButton.disabled = true;
            loadingIndicator.style.display = 'inline-block';
            
            setTimeout(() => {
                loadingIndicator.style.display = 'none';
                successMessage.style.display = 'block';
                errorMessage.style.display = 'none';
                contactForm.reset();
                submitButton.disabled = false;
                
                // Ocultar mensaje despu√©s de 5 segundos
                setTimeout(() => {
                    successMessage.style.display = 'none';
                }, 5000);
            }, 2000);
        });
        
        function validateField(field) {
            if (field.hasAttribute('required') && !field.value.trim()) {
                field.style.borderColor = '#E74C3C';
                return false;
            }
            
            if (field.type === 'email' && field.value) {
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(field.value)) {
                    field.style.borderColor = '#E74C3C';
                    return false;
                }
            }
            
            if (field.id === 'message' && field.value.length < 20) {
                field.style.borderColor = '#E74C3C';
                return false;
            }
            
            field.style.borderColor = '#ddd';
            return true;
        }
    });
</script>
{% endblock %}